{% extends 'base.html'%}
{% import 'bootstrap/wtf.html' as wtf%}
{% block styles%}
{{ super() }}
<link rel="stylesheet" href="{{url_for('static',filename='css/posts.css')}}" type="text/css">
{% endblock styles%}
<!-- Content block -->
{% block content %}
<!--Main layout-->
<main class="mt-5 pt-5">
  <div class="container">
    <section class="mt-4">
      <div class="row">
        <div class="col-md-8 mb-4">
          <!--Featured Image-->
          <div class="card mb-4 wow fadeIn">
            <img src="https://mdbootstrap.com/img/Photos/Slides/img%20(144).jpg" class="img-fluid" alt="">
          </div>
          <!--/.Featured Image-->
          <!--Card-->
          <div class="card mb-4 wow fadeIn">
            <!--Card content-->
            <div class="card-body">
              <p class="h5 my-4">{{post.title}}</p>
              <blockquote class="blockquote">
                <p class="mb-0">{{post.short_description}}</p>
              </blockquote>
              <p>{{post.post_content}}</p>
            </div>
          </div>
          <!--Author-->
          <div class="card mb-4 wow fadeIn">
            <div class="card-header font-weight-bold">
              <span>About author</span>
            </div>
            <div class="card-body">
              <div class="media d-block d-md-flex mt-3">
                <img class="d-flex mb-3 mx-auto z-depth-1"
                  src="{{url_for('static',filename=post.author.profile_pic_path)}}" alt="Generic placeholder image"
                  style="width: 100px;height: 100px;object-fit: cover; border-radius: 50px;">
                <div class="media-body text-center text-md-left ml-md-3 ml-0">
                  <a href="{{url_for('main.profile',username=post.author.username)}}">
                    <h5 class="mt-0 font-weight-bold">{{post.author.username}}</h5>
                  </a>
                  {{post.author.bio}}
                </div>
                {% if post.author == current_user%}
                <div>
                  <button class="btn btn-sm m-1 btn-info"><a
                      href="{{url_for('main.update_post',post_id=post.id)}}">Update Post</a></button>
                  <button class="btn btn-sm m-1 btn-danger" data-toggle="modal" data-target="#deleteModal">Delete
                    Post</button>
                </div>
                {%endif%}
              </div>
            </div>
          </div>
          <!--Author-->
          <!--Comments-->
          {% if comments == "None" %}
          <div class="card card-comments mb-3">
            <div class="card-header font-weight-bold">Comments</div>
            {% for comment in comments %}
            <div class="card-body">
              <div class="media d-block d-md-flex mt-4">
                <img class="d-flex mb-3 mx-auto " src="https://mdbootstrap.com/img/Photos/Avatars/img (20).jpg"
                  alt="Generic placeholder image"
                  style="width: 80px;height: 80px;object-fit: cover; border-radius: 40px;">
                <div class="media-body text-center text-md-left ml-md-3 ml-0">
                  <h5 class="mt-0 font-weight-bold">{{comment.commenter.username}}</h5>
                  {{comment.comment_content}}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {%endif%}
          <!--Comments-->
          <!--Reply-->
          <div class="card mb-3 wow fadeIn">
            <div class="card-header font-weight-bold">Leave a comment</div>
            <div class="card-body">
              {{wtf.quick_form(comment_form)}}
            </div>
          </div>
          <!--Reply-->
        </div>
        <div class="col-md-4 mb-4">
          <div class="card blue-gradient mb-4 wow fadeIn">
            <div class="card-body text-white text-center">
              <h4 class="mb-4">
                <strong>Learn Bootstrap 4 with MDB</strong>
              </h4>
              <p>
                <strong>Best & free guide of responsive web design</strong>
              </p>
              <p class="mb-4">
                <strong>The most comprehensive tutorial for the Bootstrap 4. Loved by over 500 000 users. Video
                  and written versions available. Create your own, stunning website.</strong>
              </p>
              <a target="_blank" href="https://mdbootstrap.com/education/bootstrap/"
                class="btn btn-outline-white btn-md">Start
                free tutorial
                <i class="fas fa-graduation-cap ml-2"></i>
              </a>
            </div>
          </div>
          <!--Subscribe-->
          <div class="card mb-4 text-center wow fadeIn">

            <div class="card-header">Do you want to get informed about new articles?</div>

            <!--Card content-->
            <div class="card-body">

              <!-- Default form login -->
              <form>

                <!-- Default input email -->
                <label for="defaultFormEmailEx" class="grey-text">Your email</label>
                <input type="email" id="defaultFormLoginEmailEx" class="form-control">

                <br>

                <!-- Default input password -->
                <label for="defaultFormNameEx" class="grey-text">Your name</label>
                <input type="text" id="defaultFormNameEx" class="form-control">

                <div class="text-center mt-4">
                  <button class="btn btn-info btn-md" type="submit">Sign up</button>
                </div>
              </form>
              <!-- Default form login -->

            </div>

          </div>
          <!--Subscribe-->
          <!--Other Posts-->
          <div class="card mb-4 wow fadeIn">
            <div class="card-header">Related articles</div>
            <div class="card-body">
              <ul class="list-unstyled">
                <li class="media my-2">
                  <img class="d-flex mr-3" src="https://mdbootstrap.com/img/Photos/Others/placeholder6.jpg"
                    alt="An image">
                  <div class="media-body">
                    <a href="">
                      <h5 class="mt-0 mb-1 font-weight-bold">List-based media object</h5>
                    </a>
                    Cras sit amet nibh libero, in gravida nulla (...)
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <!--/Other Posts-->
        </div>
      </div>
    </section>
  </div>
</main>
<!--Main layout-->
<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Delete {{post.title}}?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <form action="{{url_for('delete_post, post_id=post.id')}}" method="POST">
          <button type="submit" class="btn btn-danger">Yes, delete post</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}